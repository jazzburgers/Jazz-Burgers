<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jazz Burgers | Pedidos Online</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Babel para transpilar JSX en el navegador (solo para desarrollo/ejemplo simple) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Color de fondo suave */
            scroll-behavior: smooth; /* Desplazamiento suave para anclas */
        }
        /* Estilos generales para botones y elementos redondeados */
        .btn-primary {
            background-color: #ef4444; /* Rojo vibrante */
            color: white;
            padding: 12px 24px;
            border-radius: 9999px; /* Totalmente redondeado (pill shape) */
            font-weight: 700; /* Más audaz */
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 6px 12px rgba(239, 68, 68, 0.3); /* Sombra más pronunciada */
        }
        .btn-primary:hover {
            background-color: #dc2626; /* Rojo más oscuro al pasar el ratón */
            transform: translateY(-2px); /* Pequeño efecto de elevación */
        }
        .btn-secondary {
            background-color: #3b82f6; /* Azul para acciones secundarias */
            color: white;
            padding: 8px 16px;
            border-radius: 9999px;
            font-weight: 500;
            transition: background-color 0.3s ease;
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
        }
        .btn-secondary:hover {
            background-color: #2563eb;
        }
        .card {
            background-color: white;
            border-radius: 1.5rem; /* Bordes aún más redondeados */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08); /* Sombra más suave y dispersa */
        }
        input[type="text"],
        input[type="number"],
        textarea {
            border-radius: 0.75rem; /* Bordes más redondeados para campos de entrada */
            border: 1px solid #d1d5db;
            padding: 1rem 1.25rem; /* Mayor padding */
            width: 100%;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        input[type="text"]:focus,
        input[type="number"]:focus,
        textarea:focus {
            outline: none;
            border-color: #ef4444; /* Borde rojo al enfocar */
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2); /* Sombra de enfoque */
        }
        .modal {
            background-color: rgba(0, 0, 0, 0.7); /* Fondo semitransparente más oscuro para el modal */
            z-index: 1000;
        }
        .modal-content {
            border-radius: 2rem; /* Bordes muy redondeados para el modal */
            max-width: 95%; /* Un poco más de ancho en móviles */
            width: 600px; /* Ancho en escritorio */
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); /* Sombra más intensa */
            animation: slideUp 0.3s ease-out; /* Animación de entrada por defecto */
        }
        /* Para hacer que el modal aparezca desde abajo en móviles */
        @media (max-width: 767px) {
            .modal-content {
                animation: slideUpMobile 0.3s ease-out;
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
                height: 90vh; /* Ocupa la mayor parte de la pantalla verticalmente */
            }
            /* Asegurar que la animación de salida para móvil también sea desde abajo */
            .modal.hidden .modal-content {
                animation: slideDownMobile 0.3s ease-in forwards;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        @keyframes slideUpMobile {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        /* Animación de salida para desktop */
        .modal.hidden .modal-content {
            animation: slideDown 0.3s ease-in forwards;
        }
        @keyframes slideDown {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(100%);
                opacity: 0;
            }
        }
         @keyframes slideDownMobile {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(100%);
                opacity: 0;
            }
        }
        /* Estilos específicos para botones de cantidad en el modal */
        .quantity-btn {
            background-color: #fca5a5; /* Rojo muy claro */
            color: #b91c1c; /* Rojo oscuro */
            border-radius: 9999px;
            padding: 0.5rem;
            transition: background-color 0.2s ease;
        }
        .quantity-btn:hover {
            background-color: #f87171; /* Rojo un poco más oscuro */
        }
        /* Estilos para las opciones de radio/checkbox */
        .option-label {
            background-color: #fef2f2; /* Rojo muy claro para fondo de opciones */
            border: 2px solid #fca5a5; /* Borde rojo claro */
            border-radius: 1rem;
            padding: 1rem;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        .option-label:hover {
            background-color: #fee2e2;
        }
        .option-label input[type="radio"]:checked + span,
        .option-label input[type="checkbox"]:checked + span {
            color: #ef4444; /* Texto rojo cuando está seleccionado */
            font-weight: 600;
        }
        .option-label input[type="radio"]:checked,
        .option-label input[type="checkbox"]:checked {
            accent-color: #ef4444; /* Color del círculo o cuadrado de selección */
        }

        /* Estilo para la barra de categorías en móviles (scrollable) */
        .category-nav::-webkit-scrollbar {
            display: none; /* Oculta la barra de desplazamiento en Webkit */
        }
        .category-nav {
            -ms-overflow-style: none;  /* Oculta la barra de desplazamiento en IE/Edge */
            scrollbar-width: none;  /* Oculta la barra de desplazamiento en Firefox */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">
    <!-- Contenedor donde se montará la aplicación React -->
    <div id="root" class="w-full"></div>

    <script type="text/babel">
        console.log("Aplicación de Pedidos: Script React cargando...");

        const { useState, useEffect, useRef } = React;
        const ReactDOM = window.ReactDOM;

        // Inline SVG Icons
        const ShoppingCartIcon = ({ className = 'w-6 h-6' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="9" cy="21" r="1" /><circle cx="20" cy="21" r="1" /><path d="M1 1h4l2.68 12.87a2 2 0 0 0 2 1.13h9.43a2 2 0 0 0 2-1.13L23 6H6" /></svg>
        );
        const XIcon = ({ className = 'w-6 h-6' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18" /><path d="m6 6 12 12" /></svg>
        );
        const PlusIcon = ({ className = 'w-6 h-6' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 5v14" /><path d="M5 12h14" /></svg>
        );
        const MinusIcon = ({ className = 'w-6 h-6' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14" /></svg>
        );
        const CheckIcon = ({ className = 'w-6 h-6' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 6 9 17l-5-5" /></svg>
        );
        const HomeIcon = ({ className = 'w-5 h-5' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><polyline points="9 22 9 12 15 12 15 22" /></svg>
        );
        const BurgerIcon = ({ className = 'w-5 h-5' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M11 17a8 8 0 0 1-5-1.8L2 22l4-2h8a8 8 0 0 0 0-16H4.2l-2.4 2.8A12 12 0 0 0 11 17z" /><path d="M22 17h-1a8 8 0 0 0-7-7V2.5L22 10z" /></svg>
        );
        const FriesIcon = ({ className = 'w-5 h-5' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 13V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" /><path d="M10 13V7h4v6" /><path d="M12 19v3" /><path d="M8 19v3" /><path d="M16 19v3" /></svg>
        );
        const DrinkIcon = ({ className = 'w-5 h-5' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 12v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6" /><path d="M10 12h4v-2.5a2.5 2.5 0 0 0-2.5-2.5h-2.5V2h4" /><path d="M12 18v2" /></svg>
        );
        const DessertIcon = ({ className = 'w-5 h-5' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z" /><path d="M8.5 10a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0
                 0 0 8.5 10z" /><path d="M14 7a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 14 7z" /><path d="M15.5 14a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 15.5 14z" /><path d="M10 15.5a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 10 15.5z" /></svg>
        );
        const SparklesIcon = ({ className = 'w-6 h-6' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M9.9 2.5l-.23.63a1.8 1.8 0 0 1-1.63 1.25L5.26 4.67l.63-.23a1.8 1.8 0 0 1 1.25-1.63l.7-.26a1.8 1.8 0 0 1 1.63 1.25z" />
                <path d="M12 11l.23-.63a1.8 1.8 0 0 0 1.63-1.25L17.74 9.33l-.63.23a1.8 1.8 0 0 0-1.25 1.63l-.7.26a1.8 1.8 0 0 0-1.63-1.25z" />
                <path d="M10 21.5l.23-.63a1.8 1.8 0 0 0 1.63-1.25l2.8-.26-.63.23a1.8 1.8 0 0 0-1.25 1.63l-.7.26a1.8 1.8 0
                 0 0-1.63-1.25z" />
                <path d="M2.5 12l.63.23a1.8 1.8 0 0 0 1.25 1.63l.26.7a1.8 1.8 0 0 0 1.63 1.25l.63-.23a1.8 1.8 0 0 0 1.25 1.63l.26.7a1.8 1.8 0 0 0 1.63 1.25l.63-.23a1.8 1.8 0 0 0 1.25 1.63l.26.7a1.8 1.8 0 0 0 1.63 1.25l.63-.23a1.8 1.8 0 0 0 1.25 1.63l.26.7a1.8 1.8 0 0 0 1.63 1.25l.63-.23a1.8 1.8 0 0 0 1.25 1.63l.26.7a1.8 1.8 0 0 0 1.63 1.25l.63-.23a1.8 1.8 0 0 0 1.25 1.63z" />
            </svg>
        );
        const SandwichIcon = ({ className = 'w-5 h-5' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M2 17h20M2 7h20M4 12h16" />
                <rect x="2" y="5" width="20" height="14" rx="2" ry="2" />
            </svg>
        );
        const ArrowLeftIcon = ({ className = 'w-6 h-6' }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
        );

        // Componente de la página de inicio
        const LandingPage = ({ onSelectCategory }) => {
            // Opciones del menú inicial
            const landingPageOptions = [
                { id: 'hamburguesas', name: 'Hamburguesas', icon: <BurgerIcon className="w-8 h-8" /> },
                { id: 'lomitos', name: 'Lomitos', icon: <SandwichIcon className="w-8 h-8" /> },
                { id: 'papas-fritas', name: 'Papas Fritas', icon: <FriesIcon className="w-8 h-8" /> },
                { id: 'extras', name: 'Extras', icon: <PlusIcon className="w-8 h-8" /> },
            ];

            return (
                <div className="fixed inset-0 bg-red-700 flex flex-col items-center justify-center p-4 text-white z-[1001]">
                    <img src="https://placehold.co/100x100/FFFFFF/ef4444?text=JB" alt="Logo Jazz Burgers" className="rounded-full mb-6 shadow-lg" />
                    <h1 className="text-4xl md:text-5xl font-extrabold text-center mb-10 drop-shadow-md">
                        Jazz Burgers
                    </h1>
                    <p className="text-xl md:text-2xl text-center mb-12 max-w-md">
                        Elige tu aventura culinaria.
                    </p>
                    <div className="grid grid-cols-2 gap-6 w-full max-w-lg">
                        {landingPageOptions.map(option => (
                            <button
                                key={option.id}
                                className="bg-white text-red-700 py-6 rounded-2xl shadow-xl hover:scale-105 transition-transform duration-300 flex flex-col items-center justify-center space-y-3 font-semibold text-lg md:text-xl"
                                onClick={() => onSelectCategory(option.id)}
                            >
                                {option.icon}
                                <span>{option.name}</span>
                            </button>
                        ))}
                    </div>
                    <p className="mt-12 text-sm text-red-200">
                        ¡Explora nuestro menú completo después!
                    </p>
                </div>
            );
        };


        // Componente principal de la aplicación
        const App = () => {
            // Configuración: Tu número de WhatsApp
            const WHATSAPP_NUMBER = "5491122663776"; // !!! CAMBIA ESTO por tu número de WhatsApp con código de país (sin + ni espacios).
                                                    // Para el número 01122663776 (Argentina), el formato internacional es 5491122663776.
            
            // !!! IMPORTANTE: Reemplaza "TU_API_KEY_AQUI" con tu propia API Key de Google Gemini.
            // Puedes obtenerla en Google AI Studio: https://makersuite.google.com/
            const GEMINI_API_KEY = "TU_API_KEY_AQUI"; 
            
            // Datos de Productos (Altamente personalizable)
            // La estructura incluye categorías y opciones personalizables para los productos.
            const categories = [
                { id: 'all', name: 'Todo', icon: <HomeIcon className="w-5 h-5" /> },
                { id: 'hamburguesas', name: 'Hamburguesas', icon: <BurgerIcon className="w-5 h-5" /> },
                { id: 'lomitos', name: 'Lomitos', icon: <SandwichIcon className="w-5 h-5" /> }, // Nueva categoría
                { id: 'papas-fritas', name: 'Papas Fritas', icon: <FriesIcon className="w-5 h-5" /> }, // Categoría renombrada
                { id: 'extras', name: 'Extras', icon: <SparklesIcon className="w-5 h-5" /> }, // Nueva categoría
                { id: 'bebidas', name: 'Bebidas', icon: <DrinkIcon className="w-5 h-5" /> },
                { id: 'postres', name: 'Postres', icon: <DessertIcon className="w-5 h-5" /> },
            ];

            const products = [
                // Hamburguesas existentes
                {
                    id: 'hamburguesa-clasica',
                    name: 'Hamburguesa Clásica',
                    description: 'La clásica de la casa con lechuga, tomate y cebolla.',
                    price: 3500,
                    image: 'https://placehold.co/400x300/f87171/FFFFFF?text=Cl%C3%A1sica',
                    category: 'hamburguesas',
                    options: {
                        pattyCount: {
                            type: 'radio',
                            label: 'Cantidad de medallones',
                            default: 'simple',
                            choices: [
                                { value: 'simple', label: 'Simple', price: 0 },
                                { value: 'doble', label: 'Doble', price: 1000 },
                                { value: 'triple', label: 'Triple', price: 2000 }
                            ]
                        },
                        extras: {
                            type: 'checkbox',
                            label: 'Agregar extra',
                            choices: [
                                { value: 'queso-cheddar', label: 'Queso Cheddar', price: 400 },
                                { value: 'bacon', label: 'Bacon', price: 500 },
                                { value: 'huevo', label: 'Huevo', price: 300 }
                            ]
                        },
                        salsas: {
                            type: 'checkbox',
                            label: 'Salsas (gratis)',
                            choices: [
                                { value: 'mayonesa', label: 'Mayonesa', price: 0 },
                                { value: 'ketchup', label: 'Ketchup', price: 0 },
                                { value: 'mostaza', label: 'Mostaza', price: 0 }
                            ]
                        }
                    }
                },
                {
                    id: 'hamburguesa-especial',
                    name: 'Hamburguesa Especial',
                    description: 'Con cebolla caramelizada, queso azul y rúcula.',
                    price: 4200,
                    image: 'https://placehold.co/400x300/f87171/FFFFFF?text=Especial',
                    category: 'hamburguesas',
                    options: {
                        pattyCount: {
                            type: 'radio',
                            label: 'Cantidad de medallones',
                            default: 'simple',
                            choices: [
                                { value: 'simple', label: 'Simple', price: 0 },
                                { value: 'doble', label: 'Doble', price: 1200 }
                            ]
                        },
                        extras: {
                            type: 'checkbox',
                            label: 'Agregar extra',
                            choices: [
                                { value: 'queso-provolone', label: 'Queso Provolone', price: 500 },
                                { value: 'champiñones', label: 'Champiñones', price: 400 }
                            ]
                        }
                    }
                },
                {
                    id: 'hamburguesa-vegana',
                    name: 'Hamburguesa Vegana',
                    description: 'Medallón de lentejas, espinaca, tomate, pepinillos y veganesa.',
                    price: 3800,
                    image: 'https://placehold.co/400x300/84cc16/FFFFFF?text=Vegana',
                    category: 'hamburguesas',
                    options: null
                },
                // NUEVOS: Lomitos
                {
                    id: 'lomito-clasico',
                    name: 'Lomito Clásico',
                    description: 'Tierna carne de lomito, lechuga, tomate y mayonesa.',
                    price: 4000,
                    image: 'https://placehold.co/400x300/ef4444/FFFFFF?text=Lomito+Clasico',
                    category: 'lomitos',
                    options: null
                },
                {
                    id: 'lomito-completo',
                    name: 'Lomito Completo',
                    description: 'Lomito con jamón, queso, lechuga, tomate y huevo.',
                    price: 4800,
                    image: 'https://placehold.co/400x300/ef4444/FFFFFF?text=Lomito+Completo',
                    category: 'lomitos',
                    options: {
                        extras: {
                            type: 'checkbox',
                            label: 'Agregar extra',
                            choices: [
                                { value: 'bacon', label: 'Bacon', price: 500 },
                                { value: 'cebolla-caramelizada', label: 'Cebolla Caramelizada', price: 350 }
                            ]
                        }
                    }
                },
                // Papas Fritas y Acompañamientos (categoría renombrada)
                {
                    id: 'papas-grandes',
                    name: 'Papas Fritas Grandes',
                    description: 'Porción abundante de papas fritas.',
                    price: 1500,
                    image: 'https://placehold.co/400x300/fbbf24/FFFFFF?text=Papas+Grandes',
                    category: 'papas-fritas', // Categoría actualizada
                    options: null
                },
                {
                    id: 'papas-cheddar-bacon',
                    name: 'Papas Cheddar y Bacon',
                    description: 'Papas con abundante cheddar y crocante bacon.',
                    price: 2200,
                    image: 'https://placehold.co/400x300/fbbf24/FFFFFF?text=Cheddar+Bacon',
                    category: 'papas-fritas', // Categoría actualizada
                    options: null
                },
                {
                    id: 'aros-cebolla',
                    name: 'Aros de Cebolla',
                    description: 'Crocantes aros de cebolla rebozados.',
                    price: 1600,
                    image: 'https://placehold.co/400x300/fbbf24/FFFFFF?text=Aros+Cebolla',
                    category: 'papas-fritas', // Categoría actualizada
                    options: null
                },
                // NUEVOS: Extras (adicionales, ej. porciones de ingredientes)
                {
                    id: 'extra-queso-cheddar',
                    name: 'Extra Queso Cheddar (Porción)',
                    description: 'Porción extra de queso cheddar fundido para cualquier plato.',
                    price: 600,
                    image: 'https://placehold.co/400x300/fbbf24/FFFFFF?text=Extra+Cheddar',
                    category: 'extras',
                    options: null
                },
                {
                    id: 'extra-bacon-crocante',
                    name: 'Extra Bacon Crocante (Porción)',
                    description: 'Porción de bacon crocante para añadir a tu gusto.',
                    price: 700,
                    image: 'https://placehold.co/400x300/fbbf24/FFFFFF?text=Extra+Bacon',
                    category: 'extras',
                    options: null
                },
                {
                    id: 'extra-salsa-especial',
                    name: 'Extra Salsa Especial',
                    description: 'Pequeña porción de nuestra salsa especial de la casa.',
                    price: 250,
                    image: 'https://placehold.co/400x300/60a5fa/FFFFFF?text=Salsa+Especial',
                    category: 'extras',
                    options: null
                },
                // Bebidas existentes
                {
                    id: 'gaseosa-lata',
                    name: 'Gaseosa Lata',
                    description: 'Coca-Cola, Sprite, Fanta (354ml).',
                    price: 700,
                    image: 'https://placehold.co/400x300/60a5fa/FFFFFF?text=Gaseosa+Lata',
                    category: 'bebidas',
                    options: {
                        sabor: {
                            type: 'radio',
                            label: 'Sabor',
                            default: 'coca-cola',
                            choices: [
                                { value: 'coca-cola', label: 'Coca-Cola', price: 0 },
                                { value: 'sprite', label: 'Sprite', price: 0 },
                                { value: 'fanta', label: 'Fanta', price: 0 }
                            ]
                        }
                    }
                },
                {
                    id: 'agua-mineral-500ml',
                    name: 'Agua Mineral 500ml',
                    description: 'Agua mineral sin gas.',
                    price: 500,
                    image: 'https://placehold.co/400x300/60a5fa/FFFFFF?text=Agua+Mineral',
                    category: 'bebidas',
                    options: null
                },
                {
                    id: 'limonada-menta-jengibre',
                    name: 'Limonada Menta y Jengibre',
                    description: 'Refrescante limonada natural con toque de menta y jengibre.',
                    price: 950,
                    image: 'https://placehold.co/400x300/60a5fa/FFFFFF?text=Limonada',
                    category: 'bebidas',
                    options: null
                },
                // Postres existentes
                {
                    id: 'helado-chocolate',
                    name: 'Helado de Chocolate',
                    description: 'Cremoso helado de chocolate.',
                    price: 1200,
                    image: 'https://placehold.co/400x300/c084fc/FFFFFF?text=Helado+Chocolate',
                    category: 'postres',
                    options: null
                },
                {
                    id: 'brownie',
                    name: 'Brownie con Nuez',
                    description: 'Delicioso brownie húmedo con trozos de nuez.',
                    price: 1500,
                    image: 'https://placehold.co/400x300/c084fc/FFFFFF?text=Brownie',
                    category: 'postres',
                    options: null
                },
                {
                    id: 'tarta-queso',
                    name: 'Tarta de Queso',
                    description: 'Clásica tarta de queso con base de galleta.',
                    price: 1800,
                    image: 'https://placehold.co/400x300/c084fc/FFFFFF?text=Tarta+Queso',
                    category: 'postres',
                    options: null
                }
            ];

            // Variables de estado
            const [currentPage, setCurrentPage] = useState('landing'); // 'landing' o 'main'
            const [selectedCategory, setSelectedCategory] = useState('all'); // Categoría de producto seleccionada actualmente
            const [cart, setCart] = useState([]); // Artículos en el carrito de compras
            const [isCartOpen, setIsCartOpen] = useState(false); // Estado de visibilidad de la barra lateral del carrito
            const [isProductModalOpen, setIsProductModalOpen] = useState(false); // Estado del modal de personalización de producto
            const [selectedProduct, setSelectedProduct] = useState(null); // Producto que se está personalizando
            const [customizationOptions, setCustomizationOptions] = useState({}); // Opciones elegidas en el modal de producto
            const [itemQuantity, setItemQuantity] = useState(1); // Cantidad para el producto actual en el modal
            const [isCheckoutModalOpen, setIsCheckoutModalOpen] = useState(false); // Estado del modal de pago
            const [customerInfo, setCustomerInfo] = useState({ name: '', address: '', notes: '' }); // Detalles del cliente para el pago
            const [isMessageModalOpen, setIsMessageModalOpen] = useState(false); // Estado del modal de mensaje general
            const [messageModalContent, setMessageModalContent] = useState({ title: '', text: '' }); // Contenido para el modal de mensaje
            const [llmRecommendation, setLlmRecommendation] = useState(null); // Estado para la recomendación del LLM (Gemini)
            const [isLlmLoading, setIsLlmLoading] = useState(false); // Estado para el indicador de carga del LLM
            const [orderSummaryDescription, setOrderSummaryDescription] = useState(null); // Nuevo: Descripción del resumen del pedido por LLM
            const [isOrderSummaryLoading, setIsOrderSummaryLoading] = useState(false); // Nuevo: Indicador de carga para el resumen del pedido

            // Refs para modales y barra lateral para manejar clics fuera
            const cartRef = useRef(null);
            const productModalRef = useRef(null);
            const checkoutModalRef = useRef(null);
            const messageModalRef = useRef(null);

            // Productos filtrados según la categoría seleccionada
            const filteredProducts = selectedCategory === 'all'
                ? products
                : products.filter(p => p.category === selectedCategory);

            // Calcula el precio total de los artículos en el carrito
            const cartTotal = cart.reduce((sum, item) => sum + (item.price + item.optionPrice) * item.quantity, 0);

            // --- Funciones de Utilidad ---

            /**
             * Muestra un modal de mensaje/alerta general.
             * @param {string} title - El título del mensaje.
             * @param {string} text - El texto del contenido del mensaje.
             */
            const showMessageModal = (title, text) => {
                setMessageModalContent({ title, text });
                setIsMessageModalOpen(true);
            };

            /**
             * Cierra el modal de mensaje/alerta general.
             */
            const closeMessageModal = () => {
                setIsMessageModalOpen(false);
                setMessageModalContent({ title: '', text: '' });
            };

            // --- Funciones del Modal de Producto ---

            /**
             * Abre el modal de personalización de productos para un producto dado.
             * Inicializa las opciones de personalización y la cantidad.
             * @param {object} product - El objeto del producto a personalizar.
             */
            const openProductModal = (product) => {
                setSelectedProduct(product);
                setItemQuantity(1); // Cantidad por defecto
                const initialOptions = {};
                if (product.options) {
                    Object.keys(product.options).forEach(optionKey => {
                        const optionType = product.options[optionKey].type;
                        if (optionType === 'radio') {
                            initialOptions[optionKey] = product.options[optionKey].default;
                        } else if (optionType === 'checkbox') {
                            initialOptions[optionKey] = []; // Array para múltiples selecciones
                        }
                    });
                }
                setCustomizationOptions(initialOptions);
                setLlmRecommendation(null); // Reinicia la recomendación de IA al abrir un nuevo producto
                setIsProductModalOpen(true);
            };

            /**
             * Cierra el modal de personalización de productos.
             */
            const closeProductModal = () => {
                setIsProductModalOpen(false);
                setSelectedProduct(null);
                setCustomizationOptions({});
                setItemQuantity(1);
                setLlmRecommendation(null); // Limpia la recomendación al cerrar
                setIsLlmLoading(false); // Detiene la carga al cerrar
            };

            /**
             * Maneja los cambios en las opciones de personalización del producto (radio y checkbox).
             * @param {string} optionKey - La clave de la opción que se está cambiando (ej. 'pattyCount').
             * @param {string} value - El nuevo valor de la opción.
             * @param {string} type - El tipo de opción ('radio' o 'checkbox').
             */
            const handleOptionChange = (optionKey, value, type) => {
                setCustomizationOptions(prevOptions => {
                    if (type === 'radio') {
                        return { ...prevOptions, [optionKey]: value };
                    } else if (type === 'checkbox') {
                        const currentChoices = prevOptions[optionKey] || [];
                        if (currentChoices.includes(value)) {
                            return { ...prevOptions, [optionKey]: currentChoices.filter(item => item !== value) };
                        } else {
                            return { ...prevOptions, [optionKey]: [...currentChoices, value] };
                        }
                    }
                    return prevOptions;
                });
                setLlmRecommendation(null); // Borra la recomendación si cambian las opciones
            };

            /**
             * Calcula el precio adicional basado en las opciones de personalización seleccionadas.
             * @returns {number} - El precio extra de las opciones.
             */
            const calculateOptionPrice = () => {
                let extraPrice = 0;
                if (!selectedProduct || !selectedProduct.options) return 0;

                Object.keys(selectedProduct.options).forEach(optionKey => {
                    const optionConfig = selectedProduct.options[optionKey];
                    const selectedValue = customizationOptions[optionKey];

                    if (optionConfig.type === 'radio' && selectedValue) {
                        const choice = optionConfig.choices.find(c => c.value === selectedValue);
                        if (choice) extraPrice += choice.price;
                    } else if (optionConfig.type === 'checkbox' && Array.isArray(selectedValue)) {
                        selectedValue.forEach(val => {
                            const choice = optionConfig.choices.find(c => c.value === val);
                            if (choice) extraPrice += choice.price;
                        });
                    }
                });
                return extraPrice;
            };

            // --- Integración con Gemini API para Recomendación del Chef ---
            const getChefRecommendation = async () => {
                if (!selectedProduct) return;

                setIsLlmLoading(true);
                setLlmRecommendation(null); // Borra cualquier recomendación previa

                let promptText = `Actúa como un chef experto. Dado el plato principal "${selectedProduct.name}" con la descripción "${selectedProduct.description}"`;

                // Añade las opciones elegidas al prompt
                const chosenOptionDetails = Object.keys(customizationOptions)
                    .map(optionKey => {
                        const optionConfig = selectedProduct.options?.[optionKey];
                        if (!optionConfig) return null;

                        const selectedValue = customizationOptions[optionKey];
                        if (optionConfig.type === 'radio' && selectedValue) {
                            const choice = optionConfig.choices.find(c => c.value === selectedValue);
                            return `${optionConfig.label}: ${choice?.label}`;
                        } else if (optionConfig.type === 'checkbox' && Array.isArray(selectedValue) && selectedValue.length > 0) {
                            return `${optionConfig.label}: ${selectedValue.map(val => optionConfig.choices.find(c => c.value === val)?.label).join(', ')}`;
                        }
                        return null;
                    })
                    .filter(Boolean);

                if (chosenOptionDetails.length > 0) {
                    promptText += ` y las siguientes opciones elegidas: ${chosenOptionDetails.join(', ')}.`;
                } else {
                    promptText += `.`;
                }

                promptText += ` Sugiere un plato de acompañamiento (guarnición) y una bebida que combinen bien con él. Formatea tu respuesta como un objeto JSON con las propiedades "side" (string) y "beverage" (string). Por ejemplo: {'side': 'Papas Fritas', 'beverage': 'Coca-Cola'}. Sé conciso y solo proporciona el JSON.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: promptText }] });

                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "OBJECT",
                            properties: {
                                "side": { "type": "STRING" },
                                "beverage": { "type": "STRING" }
                            },
                            "propertyOrdering": ["side", "beverage"]
                        }
                    }
                };

                const apiKey = GEMINI_API_KEY; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error('Error en la respuesta de la API de Gemini:', response.status, errorData);
                        showMessageModal('Error en la IA', `No se pudo generar una recomendación. Código de error: ${response.status}.`);
                        return;
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const jsonString = result.candidates[0].content.parts[0].text;
                        const parsedRecommendation = JSON.parse(jsonString);
                        setLlmRecommendation(parsedRecommendation);
                    } else {
                        console.error('Estructura de respuesta inesperada del LLM:', result);
                        showMessageModal('Error en la IA', 'No se pudo generar una recomendación. Formato de respuesta inesperado.');
                    }
                } catch (error) {
                    console.error('Error al llamar a la API de Gemini:', error);
                    showMessageModal('Error de Conexión', 'No se pudo conectar con el servicio de recomendaciones. Verifica tu conexión o clave API.');
                } finally {
                    setIsLlmLoading(false);
                }
            };

            // --- Nuevo: Integración con Gemini API para Resumen del Pedido ---
            const generateOrderSummary = async () => {
                if (cart.length === 0) {
                    showMessageModal('Carrito Vacío', 'Agrega productos al carrito para generar un resumen.');
                    return;
                }

                setIsOrderSummaryLoading(true);
                setOrderSummaryDescription(null); // Borra el resumen previo

                let orderDetails = cart.map(item => {
                    let itemDesc = `${item.quantity} ${item.name}`;
                    if (item.chosenOptions && Object.keys(item.chosenOptions).length > 0) {
                        const optionStrings = Object.keys(item.chosenOptions).map(optionKey => {
                            const optionConfig = products.find(p => p.id === item.id)?.options?.[optionKey];
                            if (!optionConfig) return null;
                            const selectedValue = item.chosenOptions[optionKey];

                            if (optionConfig.type === 'radio' && selectedValue) {
                                const choice = optionConfig.choices.find(c => c.value === selectedValue);
                                return choice?.label;
                            } else if (optionConfig.type === 'checkbox' && Array.isArray(selectedValue) && selectedValue.length > 0) {
                                return selectedValue.map(val => optionConfig.choices.find(c => c.value === val)?.label).join(', ');
                            }
                            return null;
                        }).filter(Boolean);
                        if (optionStrings.length > 0) {
                            itemDesc += ` (${optionStrings.join(', ')})`;
                        }
                    }
                    return itemDesc;
                }).join('; ');

                const promptText = `Actúa como un chef que describe un pedido para un cliente. Aquí está el detalle del pedido: ${orderDetails}. Crea una descripción concisa y apetitosa de este pedido. No incluyas precios. No uses un formato de lista. Sé creativo y atractivo.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: promptText }] });

                const payload = {
                    contents: chatHistory,
                };

                const apiKey = GEMINI_API_KEY; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error('Error en la respuesta de la API de Gemini para resumen:', response.status, errorData);
                        setOrderSummaryDescription('No se pudo generar el resumen. Inténtalo de nuevo más tarde.');
                        showMessageModal('Error en la IA', `No se pudo generar el resumen. Código de error: ${response.status}.`);
                        return;
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const summary = result.candidates[0].content.parts[0].text;
                        setOrderSummaryDescription(summary);
                    } else {
                        console.error('Estructura de respuesta inesperada del LLM para resumen:', result);
                        setOrderSummaryDescription('No se pudo generar el resumen. Formato de respuesta inesperado.');
                        showMessageModal('Error en la IA', 'No se pudo generar el resumen. Formato de respuesta inesperado.');
                    }
                } catch (error) {
                    console.error('Error al llamar a la API de Gemini para resumen:', error);
                    setOrderSummaryDescription('Error de conexión. Verifica tu clave API o conexión a internet.');
                    showMessageModal('Error de Conexión', 'No se pudo conectar con el servicio de resumen. Verifica tu conexión o clave API.');
                } finally {
                    setIsOrderSummaryLoading(false);
                }
            };

            // --- Funciones del Carrito ---

            /**
             * Agrega el producto seleccionado con sus personalizaciones actuales y cantidad al carrito.
             */
            const addItemToCart = () => {
                if (!selectedProduct) return;

                const optionPrice = calculateOptionPrice();
                const itemToAdd = {
                    ...selectedProduct,
                    uniqueId: `${selectedProduct.id}-${JSON.stringify(customizationOptions)}-${Date.now()}`, // ID único para cada artículo del carrito
                    chosenOptions: customizationOptions,
                    quantity: itemQuantity,
                    optionPrice: optionPrice // Almacenar el precio extra calculado
                };

                setCart(prevCart => {
                    // Para simplificar, siempre se agrega como un nuevo elemento incluso si las opciones son idénticas.
                    // Una lógica más compleja podría intentar agrupar elementos idénticos con opciones idénticas.
                    return [...prevCart, itemToAdd];
                });

                showMessageModal('Producto Agregado', `${itemToAdd.name} ${itemToAdd.quantity > 1 ? `(x${itemToAdd.quantity})` : ''} agregado al carrito.`);
                closeProductModal();
                setIsCartOpen(true); // Abrir la barra lateral del carrito cuando se agrega un artículo
                setOrderSummaryDescription(null); // Limpiar resumen al añadir algo nuevo
            };

            /**
             * Aumenta la cantidad de un artículo específico en el carrito.
             * @param {string} uniqueId - El ID único del artículo del carrito.
             */
            const increaseCartItemQuantity = (uniqueId) => {
                setCart(prevCart =>
                    prevCart.map(item =>
                        item.uniqueId === uniqueId ? { ...item, quantity: item.quantity + 1 } : item
                    )
                );
                setOrderSummaryDescription(null); // Limpiar resumen al cambiar cantidad
            };

            /**
             * Disminuye la cantidad de un artículo específico en el carrito.
             * Elimina el artículo si la cantidad llega a 0.
             * @param {string} uniqueId - El ID único del artículo del carrito.
             */
            const decreaseCartItemQuantity = (uniqueId) => {
                setCart(prevCart =>
                    prevCart.map(item =>
                        item.uniqueId === uniqueId ? { ...item, quantity: item.quantity - 1 } : item
                    ).filter(item => item.quantity > 0) // Eliminar elementos con cantidad 0
                );
                setOrderSummaryDescription(null); // Limpiar resumen al cambiar cantidad
            };

            /**
             * Elimina un artículo específico del carrito.
             * @param {string} uniqueId - El ID único del artículo del carrito.
             */
            const removeCartItem = (uniqueId) => {
                setCart(prevCart => prevCart.filter(item => item.uniqueId !== uniqueId));
                showMessageModal('Producto Eliminado', 'Producto eliminado del carrito.');
                setOrderSummaryDescription(null); // Limpiar resumen al eliminar
            };

            // --- Funciones de Pago ---

            /**
             * Abre el modal de pago si el carrito no está vacío.
             */
            const openCheckoutModal = () => {
                if (cart.length === 0) {
                    showMessageModal('Carrito Vacío', 'Por favor, agrega productos al carrito antes de realizar un pedido.');
                    return;
                }
                setIsCheckoutModalOpen(true);
            };

            /**
             * Cierra el modal de pago y restablece la información del cliente.
             */
            const closeCheckoutModal = () => {
                setIsCheckoutModalOpen(false);
                setCustomerInfo({ name: '', address: '', notes: '' });
            };

            /**
             * Genera el mensaje de WhatsApp con los detalles del pedido y la información del cliente.
             * @returns {string} - El mensaje codificado para URL de WhatsApp.
             */
            const generateWhatsAppMessage = () => {
                let message = `¡Hola! 👋 Tengo un nuevo pedido para ti:\n\n`;

                message += `*Cliente:* ${customerInfo.name}\n`;
                message += `*Dirección:* ${customerInfo.address}\n\n`;

                if (orderSummaryDescription) {
                    message += `*Resumen del Pedido:*\n${orderSummaryDescription}\n\n`;
                } else {
                    message += `*Detalle del Pedido:*\n`;
                }
                
                cart.forEach((item, index) => {
                    const itemTotal = (item.price + item.optionPrice) * item.quantity;
                    message += `${index + 1}. *${item.name}* (x${item.quantity}) - $${itemTotal.toLocaleString('es-AR')}\n`;
                    // Agregar opciones elegidas al mensaje
                    if (item.chosenOptions && Object.keys(item.chosenOptions).length > 0) {
                        Object.keys(item.chosenOptions).forEach(optionKey => {
                            const optionConfig = products.find(p => p.id === item.id)?.options?.[optionKey];
                            if (optionConfig) {
                                const selectedValue = item.chosenOptions[optionKey];
                                if (optionConfig.type === 'radio' && selectedValue) {
                                    const choice = optionConfig.choices.find(c => c.value === selectedValue);
                                    if (choice) message += `    - ${optionConfig.label}: ${choice.label}\n`;
                                } else if (optionConfig.type === 'checkbox' && Array.isArray(selectedValue) && selectedValue.length > 0) {
                                    message += `    - ${optionConfig.label}: ${selectedValue.map(val => optionConfig.choices.find(c => c.value === val)?.label).join(', ')}\n`;
                                }
                            }
                        });
                    }
                });

                message += `\n*Total a Pagar:* $${cartTotal.toLocaleString('es-AR')}\n\n`;

                if (customerInfo.notes) {
                    message += `*Notas de Entrega:* ${customerInfo.notes}\n\n`;
                }

                message += `¡Gracias!`;

                return encodeURIComponent(message);
            };

            /**
             * Maneja el envío del formulario de pago.
             * Abre WhatsApp con el mensaje pre-rellenado.
             * @param {Event} e - El evento de envío del formulario.
             */
            const handleCheckoutSubmit = (e) => {
                e.preventDefault();

                if (!customerInfo.name || !customerInfo.address) {
                    showMessageModal('Campos Obligatorios', 'Por favor, completa tu nombre y dirección.');
                    return;
                }

                const whatsappMessage = generateWhatsAppMessage();
                const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${whatsappMessage}`;

                window.open(whatsappUrl, '_blank'); // Abrir WhatsApp en una nueva pestaña
                closeCheckoutModal(); // Cerrar el modal de pago
                setCart([]); // Vaciar el carrito
                setOrderSummaryDescription(null); // Limpiar el resumen al enviar el pedido
                showMessageModal('Pedido Enviado', 'Tu pedido ha sido enviado con éxito por WhatsApp. ¡Te contactaremos pronto!');
            };

            // --- Manejadores de Clicks Fuera para Modales/Barra Lateral ---
            useEffect(() => {
                const handleClickOutside = (event) => {
                    // Barra Lateral del Carrito
                    if (isCartOpen && cartRef.current && !cartRef.current.contains(event.target)) {
                        setIsCartOpen(false);
                    }
                    // Modal de Producto
                    // Usar un check más robusto para que no se cierre si el clic es en el botón de abrir o cualquier elemento que deba activarlo
                    if (isProductModalOpen && productModalRef.current && !productModalRef.current.contains(event.target) && !event.target.closest('[onClick*="openProductModal"]')) {
                        closeProductModal();
                    }
                    // Modal de Pago
                    if (isCheckoutModalOpen && checkoutModalRef.current && !checkoutModalRef.current.contains(event.target)) {
                        closeCheckoutModal();
                    }
                    // Modal de Mensaje
                    if (isMessageModalOpen && messageModalRef.current && !messageModalRef.current.contains(event.target)) {
                        closeMessageModal();
                    }
                };

                document.addEventListener('mousedown', handleClickOutside);
                return () => {
                    document.removeEventListener('mousedown', handleClickOutside);
                };
            }, [isCartOpen, isProductModalOpen, isCheckoutModalOpen, isMessageModalOpen]); // Dependencias para useEffect

            // Función para hacer scroll suave a la categoría
            // (Se mantiene para la categoría 'Todo' si se decide usar scroll para esa vista)
            const scrollToCategory = (categoryId) => {
                const element = document.getElementById(`category-${categoryId}`);
                if (element) {
                    const categoryNav = document.querySelector('.category-nav');
                    const offset = categoryNav ? categoryNav.offsetHeight : 0;
                    
                    const elementPosition = element.getBoundingClientRect().top + window.scrollY;
                    window.scrollTo({
                        top: elementPosition - offset - 20, 
                        behavior: 'smooth'
                    });
                }
            };

            return (
                <div className="min-h-screen flex flex-col bg-gray-100 font-inter text-gray-800">
                    {/* Renderiza la Landing Page o el menú principal */}
                    {currentPage === 'landing' ? (
                        <LandingPage onSelectCategory={(catId) => { setCurrentPage('main'); setSelectedCategory(catId); }} />
                    ) : (
                        <>
                            {/* Header (Solo para móvil - flotante en la parte superior) */}
                            <header className="bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-40 rounded-b-xl md:hidden">
                                <div className="flex items-center space-x-2">
                                    <img src="https://placehold.co/40x40/ef4444/FFFFFF?text=Logo" alt="Logo Jazz Burgers" className="rounded-full" />
                                    <h1 className="text-2xl font-bold text-gray-900">Jazz Burgers</h1>
                                </div>
                                {/* Botón para volver a la Landing Page */}
                                <button
                                    className="p-2 text-gray-500 hover:text-gray-800 rounded-full hover:bg-gray-100 transition-colors"
                                    onClick={() => setCurrentPage('landing')}
                                >
                                    <ArrowLeftIcon className="w-6 h-6" />
                                </button>
                            </header>

                            {/* Hero Section (visible solo en desktop y tablet) */}
                            <section className="hidden md:block w-full bg-cover bg-center h-64 md:h-80 lg:h-96 relative rounded-b-xl overflow-hidden" style={{backgroundImage: 'url(https://placehold.co/1200x500/ef4444/FFFFFF?text=Bienvenido+a+Jazz+Burgers)'}}>
                                <div className="absolute inset-0 bg-black opacity-40"></div>
                                <div className="relative z-10 flex flex-col items-center justify-center h-full text-white text-center p-4">
                                    <h2 className="text-4xl md:text-6xl font-extrabold mb-4 drop-shadow-lg">Jazz Burgers</h2>
                                    <p className="text-xl md:text-2xl font-medium drop-shadow-lg">Las mejores hamburguesas de la ciudad.</p>
                                </div>
                                {/* Botón para volver a la Landing Page en Desktop/Tablet */}
                                <button
                                    className="absolute top-4 left-4 p-3 bg-white text-gray-700 rounded-full shadow-md hover:bg-gray-100 transition-colors hidden md:flex items-center space-x-2"
                                    onClick={() => setCurrentPage('landing')}
                                >
                                    <ArrowLeftIcon className="w-5 h-5" />
                                    <span className="font-semibold">Volver al Inicio</span>
                                </button>
                            </section>

                            {/* Category Tabs (Fijo en la parte superior, con scroll horizontal en móviles) */}
                            <nav className="bg-white shadow-md p-3 overflow-x-auto flex items-center justify-start md:justify-center space-x-4 sticky top-0 md:top-[0px] z-30 border-b border-gray-200 rounded-b-xl category-nav">
                                {categories.map(category => (
                                    <button
                                        key={category.id}
                                        onClick={() => {
                                            setSelectedCategory(category.id);
                                        }}
                                        className={`flex items-center px-5 py-2 rounded-full text-base font-medium transition-all duration-200 whitespace-nowrap shadow-sm
                                            ${selectedCategory === category.id
                                                ? 'bg-red-600 text-white shadow-lg transform scale-105'
                                                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                            }`}
                                    >
                                        {category.icon}
                                        <span className="ml-2">{category.name}</span>
                                    </button>
                                ))}
                            </nav>

                            {/* Main Content Area */}
                            <main className="flex-1 p-4 md:p-8 max-w-7xl mx-auto w-full">
                                {/* Siempre mostramos UNA sección, ya sea "Todo" o una categoría específica */}
                                {(() => {
                                    const categoryToDisplay = categories.find(cat => cat.id === selectedCategory);
                                    const productsToDisplay = selectedCategory === 'all'
                                        ? products
                                        : products.filter(p => p.category === selectedCategory);

                                    if (!categoryToDisplay) return null; // Fallback si por alguna razón la categoría no se encuentra

                                    return (
                                        <section key={categoryToDisplay.id} id={`category-${categoryToDisplay.id}`} className="mb-8">
                                            <h2 className="text-3xl font-extrabold text-gray-900 mb-6 border-b-2 border-red-500 pb-2">
                                                {categoryToDisplay.name}
                                            </h2>
                                            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                                                {productsToDisplay.length > 0 ? (
                                                    productsToDisplay.map(product => (
                                                        <div
                                                            key={product.id}
                                                            className="bg-white rounded-2xl shadow-lg hover:shadow-xl hover:scale-[1.01] transition-all duration-300 overflow-hidden flex flex-col cursor-pointer"
                                                            onClick={() => openProductModal(product)}
                                                        >
                                                            <img
                                                                src={product.image}
                                                                alt={product.name}
                                                                className="w-full h-48 object-cover rounded-t-2xl"
                                                            />
                                                            <div className="p-4 flex-grow flex flex-col justify-between">
                                                                <h3 className="text-xl font-bold text-gray-900 mb-2">{product.name}</h3>
                                                                <p className="text-sm text-gray-600 mb-3 flex-grow">{product.description}</p>
                                                                <div className="flex justify-between items-center mt-auto">
                                                                    <span className="text-2xl font-extrabold text-red-600">
                                                                        ${product.price.toLocaleString('es-AR')}
                                                                    </span>
                                                                    <button
                                                                        className="bg-red-500 text-white p-3 rounded-full shadow-md hover:bg-red-600 transition-colors"
                                                                        onClick={(e) => { e.stopPropagation(); openProductModal(product); }}
                                                                    >
                                                                        <PlusIcon className="w-6 h-6" />
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    ))
                                                ) : (
                                                    <p className="text-gray-500 col-span-full text-center py-8">
                                                        No hay productos disponibles en esta categoría.
                                                    </p>
                                                )}
                                            </div>
                                        </section>
                                    );
                                })()}
                            </main>

                            {/* Floating Cart Button */}
                            <button
                                className="fixed bottom-6 right-6 p-4 bg-red-600 text-white rounded-full shadow-2xl hover:bg-red-700 transition-all duration-300 transform scale-100 hover:scale-110 z-50"
                                onClick={() => setIsCartOpen(!isCartOpen)}
                            >
                                <ShoppingCartIcon className="w-8 h-8" />
                                {cart.length > 0 && (
                                    <span className="absolute -top-1 -right-1 bg-yellow-400 text-gray-900 text-sm font-bold rounded-full w-6 h-6 flex items-center justify-center animate-bounce border-2 border-white">
                                        {cart.length}
                                    </span>
                                )}
                            </button>
                        </>
                    )}

                    {/* Cart Sidebar */}
                    <div
                        ref={cartRef}
                        className={`fixed inset-y-0 right-0 w-full max-w-sm bg-white shadow-2xl transform transition-transform duration-300 ease-in-out z-50 p-6 flex flex-col
                            ${isCartOpen ? 'translate-x-0' : 'translate-x-full'}`}
                    >
                        <div className="flex justify-between items-center mb-6 border-b pb-4">
                            <h2 className="text-3xl font-bold text-gray-900">Tu Carrito</h2>
                            <button
                                className="p-2 text-gray-500 hover:text-gray-800 rounded-full hover:bg-gray-100 transition-colors"
                                onClick={() => setIsCartOpen(false)}
                            >
                                <XIcon className="w-6 h-6" />
                            </button>
                        </div>

                        {cart.length === 0 ? (
                            <div className="flex flex-col items-center justify-center flex-grow text-gray-500">
                                <ShoppingCartIcon className="w-24 h-24 mb-4 opacity-50" />
                                <p className="text-lg">Tu carrito está vacío.</p>
                            </div>
                        ) : (
                            <div className="flex-grow overflow-y-auto space-y-4 pr-2 -mr-2">
                                {/* Sección de resumen del pedido por IA */}
                                <div className="mt-4 mb-4 border-b pb-4 border-gray-200">
                                    <button
                                        onClick={generateOrderSummary}
                                        className="w-full bg-indigo-600 text-white py-2 rounded-full text-md font-semibold shadow-md hover:bg-indigo-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"
                                        disabled={isOrderSummaryLoading || cart.length === 0 || GEMINI_API_KEY === "TU_API_KEY_AQUI" || !GEMINI_API_KEY}
                                    >
                                        {isOrderSummaryLoading ? (
                                            <>
                                                <svg className="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                </svg>
                                                <span>Generando resumen...</span>
                                            </>
                                        ) : (
                                            <>
                                                <SparklesIcon className="w-5 h-5" />
                                                <span>✨ Resumir mi Pedido ✨</span>
                                            </>
                                        )}
                                    </button>
                                    {(GEMINI_API_KEY === "TU_API_KEY_AQUI" || !GEMINI_API_KEY) && (
                                        <p className="text-sm text-center text-yellow-600 mt-2">
                                            *Configura tu `GEMINI_API_KEY` para el resumen.
                                        </p>
                                    )}
                                    {orderSummaryDescription && (
                                        <div className="bg-blue-50 p-3 rounded-lg mt-3 text-sm text-blue-800">
                                            <p className="font-semibold mb-1">¡Aquí está tu pedido resumido!</p>
                                            <p>{orderSummaryDescription}</p>
                                        </div>
                                    )}
                                </div>
                                {/* Fin de la sección de resumen del pedido */}

                                {cart.map(item => (
                                    <div key={item.uniqueId} className="flex items-center space-x-4 bg-gray-50 p-3 rounded-lg shadow-sm">
                                        <img src={item.image} alt={item.name} className="w-16 h-16 object-cover rounded-md flex-shrink-0" />
                                        <div className="flex-grow">
                                            <h4 className="font-semibold text-gray-900">{item.name}</h4>
                                            <p className="text-sm text-gray-600">
                                                {Object.keys(item.chosenOptions).map(optionKey => {
                                                    const optionConfig = products.find(p => p.id === item.id)?.options?.[optionKey];
                                                    const selectedValue = item.chosenOptions[optionKey];
                                                    if (!optionConfig || !selectedValue || (Array.isArray(selectedValue) && selectedValue.length === 0)) return null;

                                                    if (optionConfig.type === 'radio') {
                                                        const choice = optionConfig.choices.find(c => c.value === selectedValue);
                                                        return `(${choice?.label}) `;
                                                    } else if (optionConfig.type === 'checkbox') {
                                                        return `(${selectedValue.map(val => optionConfig.choices.find(c => c.value === val)?.label).join(', ')}) `;
                                                    }
                                                    return null;
                                                }).filter(Boolean).join('')}
                                            </p>
                                            <p className="text-md font-medium text-red-600">$ {(item.price + item.optionPrice).toLocaleString('es-AR')}</p>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <button
                                                className="bg-gray-200 text-gray-700 p-1 rounded-full hover:bg-gray-300 transition-colors quantity-btn"
                                                onClick={() => decreaseCartItemQuantity(item.uniqueId)}
                                            >
                                                <MinusIcon className="w-4 h-4" />
                                            </button>
                                            <span className="font-semibold text-lg w-6 text-center">{item.quantity}</span>
                                            <button
                                                className="bg-gray-200 text-gray-700 p-1 rounded-full hover:bg-gray-300 transition-colors quantity-btn"
                                                onClick={() => increaseCartItemQuantity(item.uniqueId)}
                                            >
                                                <PlusIcon className="w-4 h-4" />
                                            </button>
                                        </div>
                                        <button
                                            className="text-red-500 hover:text-red-700 p-1 rounded-full hover:bg-red-50 transition-colors"
                                            onClick={() => removeCartItem(item.uniqueId)}
                                        >
                                            <XIcon className="w-5 h-5" />
                                        </button>
                                    </div>
                                ))}
                            </div>
                        )}

                        <div className="mt-6 pt-4 border-t border-gray-200">
                            <div className="flex justify-between items-center text-2xl font-bold text-gray-900 mb-4">
                                <span>Total:</span>
                                <span>${cartTotal.toLocaleString('es-AR')}</span>
                            </div>
                            <button
                                className="w-full btn-primary py-3 rounded-full text-lg font-semibold shadow-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                onClick={openCheckoutModal}
                                disabled={cart.length === 0}
                            >
                                Realizar Pedido
                            </button>
                        </div>
                    </div>

                    {/* Product Customization Modal */}
                    {isProductModalOpen && selectedProduct && (
                        <div className="fixed inset-0 bg-black bg-opacity-70 flex items-end md:items-center justify-center p-0 md:p-4 z-[1000]">
                            <div ref={productModalRef} className="modal-content bg-white w-full h-[90vh] md:max-h-[calc(100vh-2rem)] relative p-6 flex flex-col overflow-hidden">
                                <button
                                    className="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold p-1 rounded-full bg-white hover:bg-gray-100 transition-colors z-20"
                                    onClick={closeProductModal}
                                >
                                    <XIcon className="w-7 h-7" />
                                </button>
                                <img
                                    src={selectedProduct.image}
                                    alt={selectedProduct.name}
                                    className="w-full h-64 md:h-72 object-cover rounded-xl mb-4 md:mb-6 flex-shrink-0"
                                />
                                <div className="flex-grow flex flex-col overflow-hidden">
                                    <h3 className="text-3xl md:text-4xl font-extrabold text-gray-900 mb-2">{selectedProduct.name}</h3>
                                    <p className="text-gray-600 mb-4 text-base md:text-lg flex-shrink-0">{selectedProduct.description}</p>

                                    {selectedProduct.options && (
                                        <div className="space-y-6 mb-6 flex-grow overflow-y-auto pr-2 -mr-2">
                                            {Object.keys(selectedProduct.options).map(optionKey => {
                                                const optionConfig = selectedProduct.options[optionKey];
                                                return (
                                                    <div key={optionKey} className="border-t pt-4 border-gray-200">
                                                        <h4 className="text-lg font-semibold text-gray-800 mb-3">{optionConfig.label}</h4>
                                                        {optionConfig.type === 'radio' && (
                                                            <div className="space-y-3">
                                                                {optionConfig.choices.map(choice => (
                                                                    <label key={choice.value} className="flex items-center p-4 option-label cursor-pointer">
                                                                        <input
                                                                            type="radio"
                                                                            name={optionKey}
                                                                            value={choice.value}
                                                                            checked={customizationOptions[optionKey] === choice.value}
                                                                            onChange={() => handleOptionChange(optionKey, choice.value, 'radio')}
                                                                            className="form-radio h-6 w-6 text-red-500 focus:ring-red-400"
                                                                        />
                                                                        <span className="ml-4 text-gray-800 font-medium text-lg flex-grow">{choice.label}</span>
                                                                        {choice.price > 0 && (
                                                                            <span className="text-md text-gray-700">
                                                                                +${choice.price.toLocaleString('es-AR')}
                                                                            </span>
                                                                        )}
                                                                    </label>
                                                                ))}
                                                            </div>
                                                        )}
                                                        {optionConfig.type === 'checkbox' && (
                                                            <div className="space-y-3">
                                                                {optionConfig.choices.map(choice => (
                                                                    <label key={choice.value} className="flex items-center p-4 option-label cursor-pointer">
                                                                        <input
                                                                            type="checkbox"
                                                                            checked={customizationOptions[optionKey]?.includes(choice.value) || false}
                                                                            onChange={() => handleOptionChange(optionKey, choice.value, 'checkbox')}
                                                                            className="form-checkbox h-6 w-6 text-red-500 rounded focus:ring-red-400"
                                                                        />
                                                                        <span className="ml-4 text-gray-800 font-medium text-lg flex-grow">{choice.label}</span>
                                                                        {choice.price > 0 && (
                                                                            <span className="text-md text-gray-700">
                                                                                +${choice.price.toLocaleString('es-AR')}
                                                                            </span>
                                                                        )}
                                                                    </label>
                                                                ))}
                                                            </div>
                                                        )}
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    )}

                                    {/* Gemini LLM Recommendation Section */}
                                    <div className="mt-6 mb-6 border-t pt-4 border-gray-200 flex-shrink-0">
                                        <button
                                            onClick={getChefRecommendation}
                                            className="w-full bg-purple-600 text-white py-3 rounded-full text-lg font-semibold shadow-lg hover:bg-purple-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"
                                            disabled={isLlmLoading || GEMINI_API_KEY === "TU_API_KEY_AQUI" || !GEMINI_API_KEY}
                                        >
                                            {isLlmLoading ? (
                                                <>
                                                    <svg className="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                    </svg>
                                                    <span>Generando...</span>
                                                </>
                                            ) : (
                                                <>
                                                    <SparklesIcon className="w-5 h-5" />
                                                    <span>✨ Recomendación del Chef ✨</span>
                                                </>
                                            )}
                                        </button>
                                        {(GEMINI_API_KEY === "TU_API_KEY_AQUI" || !GEMINI_API_KEY) && (
                                            <p className="text-sm text-center text-yellow-600 mt-2">
                                                *Para usar la recomendación del chef, configura tu `GEMINI_API_KEY` en el código.
                                            </p>
                                        )}
                                        {llmRecommendation && (
                                            <div className="bg-blue-50 p-4 rounded-lg mt-4 text-center">
                                                <p className="text-blue-800 font-semibold mb-2">¡El Chef sugiere!</p>
                                                <p className="text-blue-700">
                                                    Guarnición: <span className="font-medium">{llmRecommendation.side}</span>
                                                </p>
                                                <p className="text-blue-700">
                                                    Bebida: <span className="font-medium">{llmRecommendation.beverage}</span>
                                                </p>
                                            </div>
                                        )}
                                    </div>

                                    <div className="flex items-center justify-between border-t border-gray-200 pt-6 flex-shrink-0">
                                        <div className="flex items-center space-x-3">
                                            <button
                                                className="bg-gray-200 text-gray-700 p-2 rounded-full hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed quantity-btn"
                                                onClick={() => setItemQuantity(prev => Math.max(1, prev - 1))}
                                                disabled={itemQuantity === 1}
                                            >
                                                <MinusIcon className="w-5 h-5" />
                                            </button>
                                            <span className="text-xl font-bold w-8 text-center">{itemQuantity}</span>
                                            <button
                                                className="bg-gray-200 text-gray-700 p-2 rounded-full hover:bg-gray-300 transition-colors quantity-btn"
                                                onClick={() => setItemQuantity(prev => prev + 1)}
                                            >
                                                <PlusIcon className="w-5 h-5" />
                                            </button>
                                        </div>
                                        <button
                                            className="btn-primary py-3 px-6 rounded-full text-lg font-semibold shadow-lg hover:bg-red-600 transition-colors flex items-center space-x-2"
                                            onClick={addItemToCart}
                                        >
                                            <span>Agregar</span>
                                            <span>${((selectedProduct.price + calculateOptionPrice()) * itemQuantity).toLocaleString('es-AR')}</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Checkout Modal */}
                    {isCheckoutModalOpen && (
                        <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[1000]">
                            <div ref={checkoutModalRef} className="modal-content bg-white w-full max-w-md relative p-6">
                                <button
                                    className="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold p-1 rounded-full bg-white hover:bg-gray-100 transition-colors"
                                    onClick={closeCheckoutModal}
                                >
                                    <XIcon className="w-7 h-7" />
                                </button>
                                <h3 className="text-2xl font-bold text-gray-900 mb-6 text-center">Confirmar Pedido</h3>
                                <form onSubmit={handleCheckoutSubmit} className="space-y-4">
                                    <div>
                                        <label htmlFor="customer-name" className="block text-gray-700 text-sm font-medium mb-1">Tu Nombre:</label>
                                        <input
                                            type="text"
                                            id="customer-name"
                                            placeholder="Ej: Juan Pérez"
                                            value={customerInfo.name}
                                            onChange={(e) => setCustomerInfo({ ...customerInfo, name: e.target.value })}
                                            required
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
                                        />
                                    </div>
                                    <div>
                                        <label htmlFor="customer-address" className="block text-gray-700 text-sm font-medium mb-1">Tu Dirección:</label>
                                        <input
                                            type="text"
                                            id="customer-address"
                                            placeholder="Ej: Calle Falsa 123, Ciudad"
                                            value={customerInfo.address}
                                            onChange={(e) => setCustomerInfo({ ...customerInfo, address: e.target.value })}
                                            required
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
                                        />
                                    </div>
                                    <div>
                                        <label htmlFor="delivery-notes" className="block text-gray-700 text-sm font-medium mb-1">Notas de Entrega (Opcional):</label>
                                        <textarea
                                            id="delivery-notes"
                                            rows="3"
                                            placeholder="Ej: Tocar el timbre 2 veces, dejar en portería..."
                                            value={customerInfo.notes}
                                            onChange={(e) => setCustomerInfo({ ...customerInfo, notes: e.target.value })}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"
                                        ></textarea>
                                    </div>
                                    <div className="flex justify-between items-center text-xl font-bold text-gray-900 mt-6">
                                        <span>Total:</span>
                                        <span>${cartTotal.toLocaleString('es-AR')}</span>
                                    </div>
                                    <button
                                        type="submit"
                                        className="w-full bg-green-500 text-white py-3 rounded-full text-lg font-semibold shadow-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-2"
                                    >
                                        <CheckIcon className="w-6 h-6" />
                                        <span>Enviar Pedido por WhatsApp</span>
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* General Message Modal */}
                    {isMessageModalOpen && (
                        <div className="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-[1000]">
                            <div ref={messageModalRef} className="modal-content bg-white w-full max-w-sm relative p-6 text-center">
                                <button
                                    className="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold p-1 rounded-full bg-white hover:bg-gray-100 transition-colors"
                                    onClick={closeMessageModal}
                                >
                                    <XIcon className="w-7 h-7" />
                                </button>
                                <h3 className="text-2xl font-bold text-gray-900 mb-4">{messageModalContent.title}</h3>
                                <p className="text-gray-700 mb-6">{messageModalContent.text}</p>
                                <button
                                    className="bg-blue-500 text-white py-2 px-6 rounded-full text-lg font-semibold shadow-lg hover:bg-blue-600 transition-colors"
                                    onClick={closeMessageModal}
                                >
                                    Entendido
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Renderiza la aplicación React en el elemento con id="root"
        const container = document.getElementById('root');
        try {
            const root = ReactDOM.createRoot(container);
            root.render(<App />);
            console.log("Aplicación de Pedidos: React app renderizada exitosamente.");
        } catch (error) {
            console.error("Aplicación de Pedidos: Error al renderizar la aplicación React:", error);
        }
    </script>
</body>
</html>
